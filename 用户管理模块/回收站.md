# 回收站页面交互说明

## 页面描述
回收站页面用于管理被软删除的用户数据。系统采用软删除机制，当用户被"删除"时，实际上是将其移入回收站而非直接从数据库中删除。回收站提供数据恢复和彻底删除的功能，同时支持数据的自动清理策略。

## 功能列表

### 1. 数据展示
- 已删除用户列表以表格形式展示
- 支持分页显示
- 支持按删除时间、用户名等排序
- 显示删除原因和操作人
- 显示剩余保留时间

### 2. 数据恢复功能
#### 2.1 单个恢复
- 选择单个用户进行恢复
- 恢复确认机制
- 恢复后状态设置选项

#### 2.2 批量恢复
- 选择多个用户进行批量恢复
- 批量操作确认机制
- 恢复结果反馈

### 3. 彻底删除功能
#### 3.1 单个彻底删除
- 选择单个用户进行彻底删除
- 删除确认机制
- 删除风险提示

#### 3.2 批量彻底删除
- 选择多个用户进行批量彻底删除
- 批量操作确认机制
- 删除结果反馈

### 4. 自动清理策略
#### 4.1 策略设置
- 设置数据保留时间（默认30天）
- 特殊数据保留规则设置
- 清理时间设置

#### 4.2 策略执行
- 自动执行清理任务
- 清理执行日志
- 清理异常处理

### 5. 数据导出
- 导出回收站数据
- 支持多种导出格式
- 导出字段自定义

## 交互流程

### 数据恢复流程
1. 在回收站列表中选择需要恢复的用户
2. 点击"恢复"按钮
3. 弹出恢复确认对话框
4. 选择恢复后的状态（可选）
5. 确认恢复操作
6. 系统执行恢复
7. 显示恢复结果
8. 自动刷新回收站列表

### 彻底删除流程
1. 在回收站列表中选择需要彻底删除的用户
2. 点击"彻底删除"按钮
3. 弹出风险提示和确认对话框
4. 要求输入确认文字（如"DELETE"）
5. 确认删除操作
6. 系统执行彻底删除
7. 显示删除结果
8. 自动刷新回收站列表

### 批量操作流程
1. 在回收站列表中选择多个用户
2. 点击批量操作按钮（恢复或彻底删除）
3. 弹出批量操作确认对话框
4. 显示选中的用户数量和关键信息
5. 确认批量操作
6. 系统执行批量操作
7. 显示操作结果统计
8. 自动刷新回收站列表

### 清理策略设置流程
1. 点击"清理策略"按钮
2. 打开清理策略设置页面
3. 设置数据保留时间
4. 设置特殊数据保留规则
5. 设置清理执行时间
6. 保存策略设置
7. 系统应用新策略

## 页面元素

### 1. 功能按钮区
- 批量恢复按钮
- 批量彻底删除按钮
- 清理策略按钮
- 导出按钮
- 刷新按钮

### 2. 搜索筛选区
- 用户名/ID搜索
- 删除时间范围筛选
- 删除操作人筛选
- 用户类型筛选
- 剩余保留时间筛选

### 3. 列表显示区
- 用户ID
- 用户名
- 用户类型
- 删除时间
- 删除操作人
- 删除原因
- 剩余保留时间
- 操作按钮组

### 4. 操作按钮组
- 恢复
- 彻底删除
- 查看详情

## 注意事项

### 1. 数据安全
- 彻底删除操作需要二次确认
- 批量彻底删除需要额外的安全措施
- 敏感用户数据的特殊处理
- 数据删除日志完整记录

### 2. 权限控制
- 查看回收站权限
- 恢复用户权限
- 彻底删除权限
- 设置清理策略权限

### 3. 业务规则
- 恢复用户时需要检查用户名是否已被新用户占用
- 恢复用户时需要检查关联数据的完整性
- 特定类型用户可能需要特殊的恢复流程
- 批量操作的数量限制

### 4. 日志记录
- 记录所有恢复操作日志
- 记录所有彻底删除操作日志
- 记录自动清理执行日志
- 支持日志查询和导出

### 5. 性能考虑
- 大批量操作的异步处理
- 自动清理任务的执行时间优化
- 回收站数据的存储优化
- 列表加载性能优化

### 6. 用户体验
- 操作结果的及时反馈
- 批量操作的进度显示
- 风险操作的明确提示
- 操作撤销机制（适用于部分操作）

### 7. 数据一致性
- 恢复操作的原子性保证
- 彻底删除操作的原子性保证
- 关联数据的一致性处理
- 并发操作的冲突处理
# 用户属性页面交互说明

## 页面描述
用户属性页面用于管理不同类型用户的属性定义。通过属性管理，可以为不同分类的用户（如学生、老师、家长等）定义其特有的属性字段，这些属性将在用户创建和编辑时使用。

## 功能列表

### 1. 数据展示
- 属性列表以表格形式展示
- 支持分页显示
- 支持多维度排序
- 支持按属性类型分组显示

### 2. 属性管理功能
#### 2.1 创建属性
- 属性名称（必填）
- 属性标识符（系统生成，唯一）
- 属性类型选择：
  - 文本
  - 数字
  - 日期
  - 选项（单选/多选）
  - 关联（用户/组织等）
  - 文件/图片
- 属性描述
- 验证规则设置
- 默认值设置
- 是否必填
- 是否唯一
- 排序号

#### 2.2 编辑属性
- 修改属性基本信息
- 更新验证规则
- 调整属性状态
- 更新排序号

#### 2.3 删除属性
- 软删除机制
- 删除前检查属性使用状态
- 删除确认机制

### 3. 属性关联管理
#### 3.1 分类关联
- 设置属性适用的用户分类
- 支持批量设置
- 支持必填/选填设置

#### 3.2 属性组管理
- 创建属性组
- 属性分组展示
- 组内属性排序

## 交互流程

### 创建属性流程
1. 点击"创建属性"按钮
2. 打开创建属性表单
3. 填写属性信息：
   - 属性名称
   - 选择属性类型
   - 填写属性描述
   - 设置验证规则
   - 设置默认值
   - 设置是否必填
   - 设置是否唯一
   - 设置排序号
4. 选择适用的用户分类
5. 提交表单
6. 系统验证数据
7. 创建成功后自动刷新列表

### 编辑属性流程
1. 点击属性行的"编辑"按钮
2. 打开编辑属性表单
3. 修改属性信息
4. 提交修改
5. 系统验证数据
6. 保存成功后自动刷新列表

### 删除属性流程
1. 点击属性行的"删除"按钮
2. 系统检查属性使用状态
3. 显示删除确认对话框
4. 确认删除操作
5. 执行软删除
6. 刷新属性列表

### 属性分类关联流程
1. 点击"设置分类"按钮
2. 打开分类关联页面
3. 显示可选分类列表
4. 选择需要关联的分类
5. 设置在各分类中是否必填
6. 保存关联设置
7. 自动返回属性列表

## 页面元素

### 1. 功能按钮区
- 创建属性按钮
- 批量操作按钮
- 属性组管理按钮
- 刷新按钮
- 导出按钮（可选）

### 2. 搜索筛选区
- 属性名称搜索
- 属性类型筛选
- 创建时间范围筛选
- 分类筛选

### 3. 列表显示区
- 属性ID
- 属性名称
- 属性类型
- 属性描述
- 是否必填
- 是否唯一
- 适用分类
- 创建时间
- 更新时间
- 操作按钮组

### 4. 操作按钮组
- 编辑
- 删除
- 设置分类
- 复制属性

## 注意事项

### 1. 数据验证
- 属性名称不能重复
- 属性名称不能为空
- 属性名称长度限制
- 描述字段长度限制
- 验证规则格式检查

### 2. 权限控制
- 创建属性权限
- 编辑属性权限
- 删除属性权限
- 查看属性权限
- 设置分类关联权限

### 3. 业务规则
- 已使用的属性需要谨慎修改
- 属性类型修改可能影响已有数据
- 必填属性的添加需要考虑存量数据处理
- 唯一属性的添加需要考虑存量数据验证

### 4. 日志记录
- 记录所有属性操作日志
- 记录操作人、操作时间、操作类型、操作内容
- 支持日志查询和导出

### 5. 性能考虑
- 属性数据缓存机制
- 关联数据懒加载
- 批量操作的性能优化
- 属性验证规则的性能优化

### 6. 特殊属性处理
- 系统预置属性不可删除
- 核心属性修改需要特殊权限
- 关联类型属性的数据同步机制
- 文件类型属性的存储策略